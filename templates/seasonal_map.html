{% extends "base.html" %}

{% block title %}Seasonal Map - Year {{ year }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-12">
            <h1>Seasonal Map - Year {{ year }}</h1>
            <p class="lead">Current Season: {{ current_season.value|title if current_season else 'Unknown' }}</p>
            
            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">Season Information</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Current Season: {{ current_season.value|title if current_season else 'Unknown' }}</h6>
                            {% if current_season %}
                            <h6>Effects:</h6>
                            <ul>
                                {% if current_season.value == 'spring' %}
                                <li>Food Production: +20%</li>
                                <li>Population Growth: +20%</li>
                                <li>Movement Cost: +10% (due to rain)</li>
                                <li>Common Weather: Rain, Clear</li>
                                {% elif current_season.value == 'summer' %}
                                <li>Food Production: +50%</li>
                                <li>Stone/Iron Production: +20%</li>
                                <li>Movement Cost: -20% (good conditions)</li>
                                <li>Common Weather: Clear, Drought</li>
                                {% elif current_season.value == 'autumn' %}
                                <li>Food Production: +30%</li>
                                <li>Timber Production: +20%</li>
                                <li>Population Growth: -10%</li>
                                <li>Common Weather: Rain, Storm</li>
                                {% elif current_season.value == 'winter' %}
                                <li>Food Production: -50%</li>
                                <li>All Resource Production: -30%</li>
                                <li>Movement Cost: +50% (harsh conditions)</li>
                                <li>Population Growth: -30%</li>
                                <li>Common Weather: Snow, Blizzard</li>
                                {% endif %}
                            </ul>
                            {% endif %}
                        </div>
                        <div class="col-md-6">
                            <h6>Weather Effects</h6>
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th>Weather</th>
                                        <th>Production</th>
                                        <th>Movement</th>
                                        <th>Special</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Clear</td>
                                        <td>Normal</td>
                                        <td>Normal</td>
                                        <td>None</td>
                                    </tr>
                                    <tr>
                                        <td>Rain</td>
                                        <td>-10%</td>
                                        <td>+20%</td>
                                        <td>Food +10%</td>
                                    </tr>
                                    <tr>
                                        <td>Storm</td>
                                        <td>-30%</td>
                                        <td>+50%</td>
                                        <td>Naval +100%, Battle -20%</td>
                                    </tr>
                                    <tr>
                                        <td>Fog</td>
                                        <td>-10%</td>
                                        <td>+30%</td>
                                        <td>Naval +50%, Battle -30%</td>
                                    </tr>
                                    <tr>
                                        <td>Snow</td>
                                        <td>-40%</td>
                                        <td>+70%</td>
                                        <td>Battle -20%</td>
                                    </tr>
                                    <tr>
                                        <td>Blizzard</td>
                                        <td>-70%</td>
                                        <td>+150%</td>
                                        <td>Naval +200%, Battle -50%</td>
                                    </tr>
                                    <tr>
                                        <td>Drought</td>
                                        <td>-30%</td>
                                        <td>-10%</td>
                                        <td>Food -50%, Fire Risk +50%</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            
            {% if seasonal_map_image_url %}
            <div class="card mb-4">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">Seasonal Map</h5>
                </div>
                <div class="card-body">
                    <img src="{{ seasonal_map_image_url }}" class="img-fluid" alt="Seasonal Map">
                    <div class="mt-3">
                        <h6>Map Legend</h6>
                        <div class="row">
                            <div class="col-md-3">
                                <div class="d-flex align-items-center mb-2">
                                    <div style="width: 20px; height: 20px; background-color: #8BC34A; margin-right: 10px;"></div>
                                    <span>Spring</span>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="d-flex align-items-center mb-2">
                                    <div style="width: 20px; height: 20px; background-color: #FFEB3B; margin-right: 10px;"></div>
                                    <span>Summer</span>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="d-flex align-items-center mb-2">
                                    <div style="width: 20px; height: 20px; background-color: #FF9800; margin-right: 10px;"></div>
                                    <span>Autumn</span>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="d-flex align-items-center mb-2">
                                    <div style="width: 20px; height: 20px; background-color: #ECEFF1; margin-right: 10px;"></div>
                                    <span>Winter</span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3">
                                <div class="d-flex align-items-center mb-2">
                                    <div style="width: 20px; height: 20px; background-color: #64B5F6; margin-right: 10px;"></div>
                                    <span>Rain</span>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="d-flex align-items-center mb-2">
                                    <div style="width: 20px; height: 20px; background-color: #1976D2; margin-right: 10px;"></div>
                                    <span>Storm</span>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="d-flex align-items-center mb-2">
                                    <div style="width: 20px; height: 20px; background-color: #BDBDBD; margin-right: 10px;"></div>
                                    <span>Fog</span>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="d-flex align-items-center mb-2">
                                    <div style="width: 20px; height: 20px; background-color: #FFFFFF; border: 1px solid #ccc; margin-right: 10px;"></div>
                                    <span>Snow</span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3">
                                <div class="d-flex align-items-center mb-2">
                                    <div style="width: 20px; height: 20px; background-color: #BBDEFB; margin-right: 10px;"></div>
                                    <span>Blizzard</span>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="d-flex align-items-center mb-2">
                                    <div style="width: 20px; height: 20px; background-color: #D7CCC8; margin-right: 10px;"></div>
                                    <span>Drought</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% else %}
            <div class="alert alert-warning">
                No seasonal map available for this year.
            </div>
            {% endif %}
            
            <div class="card mb-4">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">Year Navigation</h5>
                </div>
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <a href="{{ url_for('seasonal_map', year=year-1) }}" class="btn btn-outline-primary">Previous Year ({{ year-1 }})</a>
                        <a href="{{ url_for('seasonal_map', year=year+1) }}" class="btn btn-outline-primary">Next Year ({{ year+1 }})</a>
                    </div>
                </div>
            </div>
            
            <div class="text-center mb-4">
                <a href="{{ url_for('world_map') }}" class="btn btn-primary">Back to World Map</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}